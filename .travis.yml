language: node_js

node_js:
  - "stable"

env:
  global:
  - NOKOGIRI_USE_SYSTEM_LIBRARIES=true  # speeds up installation of html-proofer

cache:
  directories:
  - node_modules                  # Should increase build speed

before_script:
 - chmod +x ./_scripts/cibuild.sh # Make sure scripts are executabe
 - chmod +x ./_scripts/deploy.sh

script:
  - ./_scripts/cibuild.sh         # scripts to be run

deploy:
  provider: script                # Pages no longer works due to GH changes
  script: ./_scripts/deploy.sh    # Custom deployment to './docs' folder
  skip_cleanup: true              
  github_token: $GITHUB_TOKEN     # Private token set in TravisCI dashboard
  on:
    branch: master                # TravisCI is triggered by changes to this branch
